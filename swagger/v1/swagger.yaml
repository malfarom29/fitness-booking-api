---
swagger: '2.0'
info:
  title: API V1
  version: v1
securityDefinitions:
  bearerAuth:
    type: apiKey
    in: header
    name: Authorization
basePath: "/api"
paths:
  "/admin/activities":
    post:
      summary: Creates a new activity
      tags:
      - Activities
      security:
      - bearerAuth: []
      description: On this endpoint the admin is able to create a new activity
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: activity
        in: body
        schema:
          type: object
          properties:
            activity:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                mode:
                  type: string
                  enum:
                  - outdoor
                  - indoor
                  - virtual
              required:
              - name
              - mode
      responses:
        '201':
          description: New activity created
          examples:
            application/json:
              data:
                id: 258
                name: foo
                description: bar
                mode: outdoor
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
        '422':
          description: Missing properties or Invalid Values
          examples:
            application/json:
              error:
                type: Unprocessable entity
                message: Validation failed
                details:
                  name:
                  - can't be blank
    get:
      summary: List of activities
      tags:
      - Activities
      description: Shows a list of activities
      security:
      - bearerAuth: []
      produces:
      - application/json
      responses:
        '200':
          description: List of Activities
          examples:
            application/json:
              data:
              - id: 17
                name: non
                description: Sed deserunt earum. Nam voluptatibus cumque. Sunt ipsam
                  modi.
                mode: outdoor
              - id: 68
                name: cum
                description: Aperiam voluptas eveniet. Placeat eius quisquam. Voluptatem
                  in ut.
                mode: virtual
              - id: 119
                name: et
                description: Aut vel sit. Aut velit aut. Possimus accusantium tenetur.
                mode: outdoor
              - id: 34
                name: quibusdam
                description: Fugiat sed laboriosam. Voluptatem assumenda fuga. Consequatur
                  voluptatem voluptatibus.
                mode: virtual
              - id: 85
                name: deserunt
                description: Eligendi cupiditate consequuntur. Autem earum quibusdam.
                  Incidunt dolores qui.
                mode: virtual
              - id: 51
                name: ducimus
                description: Excepturi ipsum sunt. Recusandae sit rem. Doloremque
                  cumque quae.
                mode: virtual
              - id: 102
                name: quod
                description: Esse nisi non. Ipsam voluptas iusto. In qui voluptatem.
                mode: virtual
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
  "/admin/activities/{id}":
    parameters:
    - name: id
      in: path
      type: string
      required: true
    patch:
      summary: Updates an activity
      tags:
      - Activities
      description: It updates requested fields from an specific activity
      security:
      - bearerAuth: []
      consumes:
      - application/json
      parameters:
      - name: activity
        in: body
        schema:
          properties:
            activity:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                mode:
                  type: string
                  enum:
                  - outdoor
                  - indoor
                  - virtual
      responses:
        '200':
          description: Updated
          examples:
            application/json:
              data:
                id: 259
                name: new name
                description: Tempora incidunt omnis. Molestiae cupiditate aut. Nemo
                  in et.
                mode: virtual
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
        '404':
          description: Not found
          examples:
            application/json:
              error:
                type: Record not found
                message: Activity with id = 0 wasn't found
                details: {}
    get:
      summary: Get an specific activity
      tags:
      - Activities
      description: Shows an specific activity
      security:
      - bearerAuth: []
      produces:
      - application/json
      responses:
        '200':
          description: Show activity
          examples:
            application/json:
              data:
                id: 262
                name: laudantium
                description: Alias dolorem reprehenderit. Nisi eaque voluptatibus.
                  Corporis quisquam eaque.
                mode: outdoor
                created_at: '2020-12-12T10:59:17.168-06:00'
                updated_at: '2020-12-12T10:59:17.168-06:00'
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
        '404':
          description: Not found
          examples:
            application/json:
              error:
                type: Record not found
                message: Activity with id = 0 wasn't found
                details: {}
  "/admin/schedule_activities":
    post:
      summary: Schedule an activity
      tags:
      - Activity Scheduling
      description: Schedule an activity to be available for clients
      security:
      - bearerAuth: []
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: schedule_activity
        in: body
        schema:
          type: object
          properties:
            schedule_activity:
              properties:
                schedule_id:
                  type: integer
                activity_id:
                  type: integer
                seats:
                  type: integer
              required:
              - schedule_id
              - activity_id
              - seats
      responses:
        '200':
          description: Scheduled a new activity
          examples:
            application/json:
              data:
                id: 75
                schedule:
                  id: 111
                  begin_at: '2020-12-12T11:59:17.000-06:00'
                  finish_at: '2020-12-12T12:59:17.000-06:00'
                activity:
                  id: 265
                  name: nobis
                  description: Et et et. Autem veniam consequuntur. Culpa aliquid
                    reprehenderit.
                  mode: outdoor
                taken_seats: 0
                seats: 5
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
  "/admin/schedules":
    post:
      summary: Add a new schedule
      tags:
      - Schedules
      description: Add a schedule available for activities. This schedules may have
        many activities. For example, from 8AM to 10AM can be scheduled a swimming
        session and a boxing session
      security:
      - bearerAuth: []
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: schedule
        in: body
        schema:
          type: object
          properties:
            schedule:
              type: object
              properties:
                begin_at:
                  type: string
                  format: date-time
                finish_at:
                  type: string
                  format: date-time
              required:
              - begin_at
              - finish_at
      responses:
        '200':
          description: Create a new schedule
          examples:
            application/json:
              data:
                id: 113
                begin_at: '2020-12-12T11:59:16.000-06:00'
                finish_at: '2020-12-12T13:59:16.000-06:00'
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
        '422':
          description: Invalid values
          examples:
            application/json:
              error:
                type: Unprocessable entity
                message: Validation failed
                details:
                  begin_at:
                  - must be greater than actual date
  "/client/schedule_activities":
    get:
      summary: List of schedules available
      tags:
      - - Clients
        - Activities
      security:
      - bearerAuth: []
      description: List of activities scheduled available for a client
      produces:
      - application/json
      responses:
        '200':
          description: OK
          examples:
            application/json:
              data:
              - id: 4
                schedule:
                  id: 6
                  begin_at: '2020-12-12T11:09:38.000-06:00'
                  finish_at: '2020-12-12T12:09:38.000-06:00'
                activity:
                  id: 17
                  name: non
                  description: Sed deserunt earum. Nam voluptatibus cumque. Sunt ipsam
                    modi.
                  mode: outdoor
                taken_seats: 0
                seats: 15
              - id: 8
                schedule:
                  id: 12
                  begin_at: '2020-12-12T11:09:55.000-06:00'
                  finish_at: '2020-12-12T12:09:55.000-06:00'
                activity:
                  id: 34
                  name: quibusdam
                  description: Fugiat sed laboriosam. Voluptatem assumenda fuga. Consequatur
                    voluptatem voluptatibus.
                  mode: virtual
                taken_seats: 0
                seats: 5
              - id: 12
                schedule:
                  id: 18
                  begin_at: '2020-12-12T11:10:10.000-06:00'
                  finish_at: '2020-12-12T12:10:10.000-06:00'
                activity:
                  id: 51
                  name: ducimus
                  description: Excepturi ipsum sunt. Recusandae sit rem. Doloremque
                    cumque quae.
                  mode: virtual
                taken_seats: 0
                seats: 16
              - id: 16
                schedule:
                  id: 24
                  begin_at: '2020-12-12T11:10:43.000-06:00'
                  finish_at: '2020-12-12T12:10:43.000-06:00'
                activity:
                  id: 68
                  name: cum
                  description: Aperiam voluptas eveniet. Placeat eius quisquam. Voluptatem
                    in ut.
                  mode: virtual
                taken_seats: 0
                seats: 13
              - id: 20
                schedule:
                  id: 30
                  begin_at: '2020-12-12T11:11:32.000-06:00'
                  finish_at: '2020-12-12T12:11:32.000-06:00'
                activity:
                  id: 85
                  name: deserunt
                  description: Eligendi cupiditate consequuntur. Autem earum quibusdam.
                    Incidunt dolores qui.
                  mode: virtual
                taken_seats: 0
                seats: 19
              - id: 76
                schedule:
                  id: 114
                  begin_at: '2020-12-12T11:59:17.000-06:00'
                  finish_at: '2020-12-12T12:59:17.000-06:00'
                activity:
                  id: 267
                  name: rem
                  description: Est praesentium sed. Dolore non quia. Voluptatem quia
                    omnis.
                  mode: outdoor
                taken_seats: 0
                seats: 6
              - id: 24
                schedule:
                  id: 36
                  begin_at: '2020-12-12T11:13:16.000-06:00'
                  finish_at: '2020-12-12T12:13:16.000-06:00'
                activity:
                  id: 102
                  name: quod
                  description: Esse nisi non. Ipsam voluptas iusto. In qui voluptatem.
                  mode: virtual
                taken_seats: 0
                seats: 16
              - id: 28
                schedule:
                  id: 42
                  begin_at: '2020-12-12T11:14:42.000-06:00'
                  finish_at: '2020-12-12T12:14:42.000-06:00'
                activity:
                  id: 119
                  name: et
                  description: Aut vel sit. Aut velit aut. Possimus accusantium tenetur.
                  mode: outdoor
                taken_seats: 0
                seats: 12
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
  "/client/schedule_activities/{id}/book":
    parameters:
    - name: id
      in: path
      type: string
      required: true
    post:
      summary: Book an activity
      tags:
      - Booking
      description: It books an activity to the user
      security:
      - bearerAuth: []
      produces:
      - application/json
      responses:
        '200':
          description: Activity booked
          examples:
            application/json:
              data:
              - id: 78
                schedule:
                  id: 116
                  begin_at: '2020-12-12T11:59:17.000-06:00'
                  finish_at: '2020-12-12T12:59:17.000-06:00'
                activity:
                  id: 269
                  name: expedita
                  description: Dolores non totam. Veritatis sunt sed. Nobis distinctio
                    a.
                  mode: outdoor
                taken_seats: 0
                seats: 20
        '403':
          description: Forbidden
          examples:
            application/json:
              error:
                type: Forbidden Error
                message: You cannot perform this action
                details: {}
  "/oauth/token":
    post:
      summary: Get access token
      tags:
      - OAuth
      description: Enter the username (email), password and grant type in order to
        get the access token, which will be necessary to access to the endpoints depending
        on the user role
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: auth
        in: body
        schema:
          type: object
          properties:
            username:
              type: string
            password:
              type: string
            grant_type:
              type: string
              enum:
              - password
          required:
          - username
          - password
          - grant_type
      responses:
        '200':
          description: Get access token
          examples:
            application/json:
              access_token: inCFk53cCh9nzMLp7K6rnTBdd5XZuSkZ4b_iFNgdwRA
              token_type: Bearer
              expires_in: 7200
              refresh_token: 7zwuFWTFAMtZR_CvslCM_sXHdfLLlofOCkxlvaaM0w0
              scope: public
              created_at: 1607792357
  "/users/register":
    post:
      summary: Register a user
      tags:
      - Users
      description: On this endpoint a new user can be registered. Once the user is
        registered successfully, use the /oauth/token endpoint to obtain an access
        token
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: user
        in: body
        schema:
          type: object
          properties:
            user:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                password:
                  type: string
              required:
              - first_name
              - last_name
              - email
              - password
      responses:
        '204':
          description: New user created
